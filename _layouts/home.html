---
layout: default
---

<div class="home">
  {%- if page.title -%}
    <h1 class="page-heading">{{ page.title }}</h1>
  {%- endif -%}

  {{ content }}

  {%- if site.posts.size > 0 -%}
  <div class="home-container">
    <aside class="tag-sidebar">
      <h3>Tags</h3>
      <ul class="tag-list">
        <li><a href="#" class="tag-link active" data-tag="all">#all</a></li>
        {%- for tag in site.tags -%}
        <li><a href="#" class="tag-link" data-tag="{{ tag[0] | slugify }}">
          #{{ tag[0] }} <span class="tag-count">({{ tag[1].size }})</span>
        </a></li>
        {%- endfor -%}
      </ul>
    </aside>

    <div class="post-list-container">
      <h2 class="post-list-heading">{{ page.list_title | default: "Posts" }}</h2>
      <ul class="post-list">
        {%- for post in site.posts -%}
        <li data-tags="{{ post.tags | join: ' ' | downcase }}">
          {%- assign date_format = site.minima.date_format | default: "%b %-d, %Y" -%}
          <span class="post-meta">{{ post.date | date: date_format }}</span>
          <h3>
            <a class="post-link" href="{{ post.url | relative_url }}">
              {{ post.title | escape }}
            </a>
          </h3>
          {%- if post.tags.size > 0 -%}
          <span class="post-meta">
            {%- for tag in post.tags -%}
              #{{ tag }}{% unless forloop.last %} {% endunless %}
            {%- endfor -%}
          </span>
          {%- endif -%}
          {%- if site.show_excerpts -%}
            {{ post.excerpt }}
          {%- endif -%}
        </li>
        {%- endfor -%}
      </ul>

      <p class="rss-subscribe">subscribe <a href="{{ "/feed.xml" | relative_url }}">via RSS</a></p>
    </div>
  </div>
  {%- endif -%}
</div>

<script>
document.addEventListener("DOMContentLoaded", function () {
  var links = document.querySelectorAll(".tag-link");
  var posts = document.querySelectorAll(".post-list li");

  function filterByTag(tag) {
    links.forEach(function (l) { l.classList.remove("active"); });
    var match = document.querySelector('.tag-link[data-tag="' + tag + '"]');
    if (match) match.classList.add("active");

    posts.forEach(function (post) {
      if (tag === "all") {
        post.style.display = "";
      } else {
        var postTags = post.getAttribute("data-tags");
        post.style.display = postTags.indexOf(tag) !== -1 ? "" : "none";
      }
    });
  }

  links.forEach(function (link) {
    link.addEventListener("click", function (e) {
      e.preventDefault();
      filterByTag(this.getAttribute("data-tag"));
    });
  });

  // Check URL for ?tag= parameter on page load
  var params = new URLSearchParams(window.location.search);
  var tagParam = params.get("tag");
  if (tagParam) {
    filterByTag(tagParam);
  }
});
</script>
